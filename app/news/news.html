<div class="gdg_loading" ng-show="vm.loading"></div>
<div layout="column" layout-margin>
    <md-whiteframe class="md-whiteframe-z2" ng-repeat="article in vm.news"
            style="margin-bottom: 10px">
        <md-toolbar>
            <div class="md-toolbar-tools">
                <img ng-src="{{ article.icon }}" alt="Article Icon" />
                <h2 style="padding-left: 10px">{{ article.published }}</h2>
            </div>
        </md-toolbar>
        <md-content layout="column" layout-padding>
            <div ng-repeat="attachment in article.attachments" layout="column">
                <md-card ng-if="attachment.objectType === 'album'">
                    <md-grid-list md-cols-sm="2" md-cols-md="4" md-cols-lg="5" md-cols-gt-lg="7"
                                  md-row-height-gt-md="1:1" md-row-height="2:2" md-gutter="12px" md-gutter-gt-sm="8px">
                        <md-grid-tile ng-repeat="thumbnail in attachment.thumbnails" md-rowspan="{{ $first ? 2: 1 }}"
                                      md-colspan="{{ $first ? 2: 1 }}">
                            <a class="fill" ng-href="{{ thumbnail.url }}" target="_blank">
                                <div class="fill" style="background-image: url({{ thumbnail.image.url }});"></div>
                            </a>
                        </md-grid-tile>
                    </md-grid-list>
                    <md-card-content>
                        <p ng-bind-html="article.body"></p>
                        <div layout>
                            <a ng-href="{{ article.via.url }}" target="_blank"><md-button>View</md-button></a>
                            <md-button ng-disabled="true"> {{ article.comments }} comment<span ng-show="article.comments != 1">s</span> </md-button>
                            <md-button ng-disabled="true"> {{ article.reshares }} share<span ng-show="article.reshares != 1">s</span> </md-button>
                            <span data-size="large" data-annotation="bubble" data-href="{{ article.via.url }}"
                                    style="vertical-align: middle"></span>
                        </div>
                    </md-card-content>
                </md-card>
                <md-card ng-if="attachment.objectType === 'photo' || attachment.objectType === 'video'">
                    <a ng-href="{{ article.via.url }}" target="_blank">
                        <img ng-src="{{ attachment.fullImage.url }}" alt="Article Thumbnail"/>
                    </a>
                    <md-card-content>
                        <p ng-bind-html="article.body"></p>
                        <div layout>
                            <a ng-href="{{ article.via.url }}" target="_blank"><md-button>View</md-button></a>
                            <md-button ng-disabled="true"> {{ article.comments }} comment<span ng-show="article.comments != 1">s</span> </md-button>
                            <md-button ng-disabled="true"> {{ article.reshares }} share<span ng-show="article.reshares != 1">s</span> </md-button>
                            <span data-size="large" data-annotation="bubble" data-href="{{ article.via.url }}"
                                    style="vertical-align: middle"></span>
                        </div>
                    </md-card-content>
                </md-card>
                <md-card ng-if="attachment.objectType === 'article'">
                    <a ng-if="attachment.fullImage" ng-href="{{ article.via.url }}" target="_blank">
                        <img ng-src="{{ attachment.fullImage.url }}" alt="Article Thumbnail"/>
                    </a>
                    <md-card-content>
                        <p ng-bind-html="article.body"></p>
                        <div layout>
                            <a ng-href="{{ article.via.url }}" target="_blank"><md-button>View</md-button></a>
                            <md-button ng-disabled="true"> {{ article.comments }} comment<span ng-show="article.comments != 1">s</span> </md-button>
                            <md-button ng-disabled="true"> {{ article.reshares }} share<span ng-show="article.reshares != 1">s</span> </md-button>
                            <span data-size="large" data-annotation="bubble" data-href="{{ article.via.url }}"
                                    style="vertical-align: middle"></span>
                        </div>
                    </md-card-content>
                </md-card>
                <md-card ng-if="attachment.objectType === 'event'">
                    <md-card-content>
                        <a ng-href="{{ article.attachments[0].url }}"><h3>{{ article.attachments[0].displayName }}</h3></a>
                        <p ng-bind-html="article.body"></p>
                        <div layout>
                            <a ng-href="{{ article.attachments[0].url }}" target="_blank"><md-button>View</md-button></a>
                            <md-button ng-disabled="true"> {{ article.comments }} comment<span ng-show="article.comments != 1">s</span> </md-button>
                            <md-button ng-disabled="true"> {{ article.reshares }} share<span ng-show="article.reshares != 1">s</span> </md-button>
                            <span data-size="large" data-annotation="bubble" data-href="{{ article.via.url }}"
                                    style="vertical-align: middle"></span>
                        </div>
                    </md-card-content>
                </md-card>
            </div>
            <md-card ng-if="!article.attachments.length">
                <md-card-content>
                    <p ng-bind-html="article.body"></p>
                    <div layout>
                        <a ng-href="{{ article.via.url }}" target="_blank"><md-button>View</md-button></a>
                        <md-button ng-disabled="true"> {{ article.comments }} comment<span ng-show="article.comments != 1">s</span> </md-button>
                        <md-button ng-disabled="true"> {{ article.reshares }} share<span ng-show="article.reshares != 1">s</span> </md-button>
                        <span data-size="large" data-annotation="bubble" data-href="{{ article.via.url }}"
                                style="vertical-align: middle"></span>
                    </div>
                </md-card-content>
            </md-card>
        </md-content>
    </md-whiteframe>
</div>
<p ng-if="vm.desc" ng-bind-html="vm.desc"></p>
